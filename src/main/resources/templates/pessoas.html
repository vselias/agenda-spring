<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Lista de Pessoas</title>
<th:block th:replace="boostrap" />
</head>
<body>

	<div class="container-fluid">
		<nav th:replace="navbar"></nav>
		<div class="row justify-content-center">
			<div class="col-lg-12">
				<h3 class="text-center my-3">Lista de Pessoas</h3>

				<div class="text-danger text-center" th:if="${msgDelete ne null}">
					<p th:text="${msgDelete}"></p>
				</div>

				<div class="col-lg-12">
					<table class="table table-striped">
						<thead>
							<tr>
								<th><a
									th:href="@{'/sort/id?ordem='+ ${revDir}+'&pag='+${ativo} }">Id</a></th>
								<th><a
									th:href="@{'/sort/nome?ordem='+ ${revDir}+'&pag='+${ativo} }">Nome</a></th>
								<th><a
									th:href="@{'/sort/email?ordem='+ ${revDir}+'&pag='+${ativo} }">Email</a></th>
								<th><a
									th:href="@{'/sort/dataCadastro?ordem='+ ${revDir}+'&pag='+${ativo} }">Data
										de Cadastro</a></th>
								<th><a
									th:href="@{'/sort/sexo?ordem='+ ${revDir}+'&pag='+${ativo} }">Sexo</a></th>
								<th><a
									th:href="@{'/sort/ativo?ordem='+ ${revDir}+'&pag='+${ativo}}">Ativo</a></th>
								<th><a
									th:href="@{'/sort/cidade?ordem='+ ${revDir}+'&pag='+${ativo}}">Cidade</a></th>
								<th><a
									th:href="@{'/sort/estado?ordem='+ ${revDir}+'&pag='+${ativo}}">Estado</a></th>
								<th>Ações</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="pessoa: ${pessoas}">
								<td th:text="${pessoa.id}"></td>
								<td th:text="${pessoa.nome} eq ''? 'N/A': ${pessoa.nome}"></td>
								<td th:text="${pessoa.email}"></td>
								<td
									th:text="${#dates.format(pessoa.dataCadastro, 'dd/MM/yyyy')}">
								</td>
								<td>
									<div th:text="${pessoa.sexo} eq 'M'? 'Masculino'"></div>
									<div th:text="${pessoa.sexo} eq 'F'? 'Feminino'"></div>
									<div th:text="${pessoa.sexo} eq 'N' ? 'Neutro'"></div>

								</td>
								<td th:text="${pessoa.ativo}? 'Ativo': 'Desativado'"></td>
								<td th:text="${pessoa.cidade}"></td>
								<td th:text="${pessoa.estado}"></td>
								<td><a class="btn btn-sm btn-primary"
									th:href="@{/edit/{id}(id=${pessoa.id})}"><svg width="1em"
											height="1em" viewBox="0 0 16 16" class="bi bi-pencil"
											fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  											<path fill-rule="evenodd"
												d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z" />
											</svg> Editar </a> <a class="btn btn-sm btn-danger"
									onclick="return confirm('Deseja excluir?')"
									th:href="@{/del/{id}(id=${pessoa.id})}"><svg width="1em"
											height="1em" viewBox="0 0 16 16" class="bi bi-trash"
											fill="currentColor" xmlns="http://www.w3.org/2000/svg">
											  <path
												d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
											  <path fill-rule="evenodd"
												d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
											</svg> Remover </a></td>

							</tr>
						</tbody>
					</table>

					<div class="row justify-content-center">
						<nav th:if="${numPaginas} ne null"
							aria-label="Navegação de página exemplo">
							<ul class="pagination">
								<li class="page-item"><a class="btn btn-info"
									th:href="@{'/pessoas/'+${1}}"><svg width="1em" height="1em"
											viewBox="0 0 16 16" class="bi bi-skip-start-fill"
											fill="currentColor" xmlns="http://www.w3.org/2000/svg">
									  <path fill-rule="evenodd"
												d="M4.5 3.5A.5.5 0 0 0 4 4v8a.5.5 0 0 0 1 0V4a.5.5 0 0 0-.5-.5z" />
									  <path
												d="M4.903 8.697l6.364 3.692c.54.313 1.232-.066 1.232-.697V4.308c0-.63-.692-1.01-1.232-.696L4.903 7.304a.802.802 0 0 0 0 1.393z" />
									</svg> Primeiro </a></li>
								<li th:class="${i == ativo} ? 'active page-item': 'page-item' "
									th:each="i : ${#numbers.sequence(1, numPaginas)}"
									class="page-item"><a class="page-link"
									th:href="@{'/pessoas/'+${i}}"> <th:block th:text="${i}" />
								</a></li>
								<li class="page-item"><a class="btn btn-info"
									th:href="@{'/pessoas/'+${numPaginas}}">Último <svg
											width="1em" height="1em" viewBox="0 0 16 16"
											class="bi bi-skip-end-fill" fill="currentColor"
											xmlns="http://www.w3.org/2000/svg">
								  <path fill-rule="evenodd"
												d="M12 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z" />
								  <path
												d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z" />
								</svg></a></li>
							</ul>
						</nav>
					</div>
				</div>
				<div class="row justify-content-center">
					<h3 class="col-lg-12 text-center my-3">Lista de Arquivos</h3>
					<div class="col-lg-8">
						<table class="table table-striped">
							<thead>
								<tr>
									<th>Id</th>
									<th>Nome</th>
									<th>Data de Cadastro</th>
									<th>Ativo</th>
									<th>Arquivos</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="pessoa: ${pessoas}">
									<td th:text="${pessoa.id}"></td>
									<td th:text="${pessoa.nome} eq ''? 'N/A': ${pessoa.nome}"></td>
									<td
										th:text="${#dates.format(pessoa.dataCadastro, 'dd/MM/yyyy')}"></td>
									<td th:text="${pessoa.ativo}? 'Ativo': 'Desativado'"></td>
									<td>
										<table>
											<tr th:each="doc : ${pessoa.docs}">
												<td>
													<a th:href="@{'/download/'+${doc.id}}"> 
														<th:block th:text="${doc.nomeArquivo}" />
													</a>
												</td>
											</tr>
											<tr th:if="${#lists.isEmpty(pessoa.docs)}">
												<td>Sem Arquivos.</td>
											</tr>
									
										</table>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>